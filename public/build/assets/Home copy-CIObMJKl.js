import{j as e,r as g,y as k,_ as w}from"./app-b4mXVD5R.js";import{c as C}from"./utils-CytzSlOG.js";import{m as i}from"./proxy-CcAJyPs7.js";import L from"./Main-GNtrDKVM.js";import{D as z,a as M,b as R,c as I,d as _,e as S}from"./dialog-DRwp86_T.js";import{I as b}from"./input-CoTTzgtV.js";import{B as T}from"./button-CLOvu14J.js";import{z as o,u as A,t as P,F as V,b as c,c as d,a as m,d as u,e as x,f as D}from"./index-D0V3v82m.js";import{T as B}from"./textarea-DjDfms_o.js";import{T as O,M as E}from"./toggle-BGwHxRtC.js";import{M as H,T as K,a as Z,P as U,u as J}from"./leaflet-Deo8y3_M.js";import{C as W}from"./circle-help-5lf9vdfU.js";import"./Navbar-CgYM_CvP.js";import"./sheet-BSwBEEda.js";import"./index-BDI4_4gm.js";import"./index-cDh_9doZ.js";import"./component-sl_GCre0.js";import"./index-Dicf7H8G.js";import"./index-BwobEAja.js";import"./createLucideIcon-D5Yn-mgR.js";import"./label-CednsVd8.js";import"./index-kBhzfYTe.js";import"./index-DW48STyt.js";const Y=({children:a,className:s})=>e.jsxs("div",{className:C("relative flex min-h-screen flex-col items-center justify-center overflow-hidden bg-slate-950 w-full z-0",s),children:[e.jsx("svg",{width:"100%",height:"160px",className:"absolute bottom-0",viewBox:"0 0 1300 160",preserveAspectRatio:"none",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:e.jsxs("g",{children:[e.jsx("path",{d:"M1300,160 L-5.68434189e-14,160 L-5.68434189e-14,119 C423.103102,41.8480501 1096.33049,180.773108 1300,98 L1300,160 Z",fill:"#FFFFFF",fillRule:"nonzero"}),e.jsx("path",{d:"M129.77395,40.2373685 C292.925845,31.2149964 314.345174,146.772453 615.144273,151.135393 C915.94337,155.498333 1017.27057,40.8373289 1240.93447,40.8373289 C1262.89392,40.8373289 1282.20864,41.9705564 1299.18628,44.0144896 L1300,160 L-1.0658141e-14,160 L-1.0658141e-14,105 C31.4276111,70.4780448 73.5616946,43.3459311 129.77395,40.2373685 Z",fill:"#FFFFFF",fillRule:"nonzero",opacity:"0.3"}),e.jsx("path",{d:"M69.77395,60.2373685 C232.925845,51.2149964 314.345174,146.772453 615.144273,151.135393 C915.94337,155.498333 1017.27057,0.837328936 1240.93447,0.837328936 C1263.91283,0.837328936 1283.59768,0.606916225 1300,1 L1300,160 L-1.70530257e-13,160 L-9.9475983e-14,74 C-9.9475983e-14,74 36.9912359,62.0502671 69.77395,60.2373685 Z",fill:"#FFFFFF",fillRule:"nonzero",opacity:"0.3"}),e.jsx("path",{d:"M2.27373675e-13,68 C23.2194389,95.7701288 69.7555676,123.009338 207,125 C507.7991,129.36294 698.336099,22 922,22 C1047.38026,22 1198.02057,63.2171658 1300,101 L1300,160 L0,160 L2.27373675e-13,68 Z",fill:"#FFFFFF",fillRule:"nonzero",opacity:"0.3",transform:"translate(650, 91) scale(-1, 1) translate(-650, -91) "})]})}),e.jsxs("div",{className:"relative flex w-full flex-1 scale-y-125 md:-mt-24 -mt-20 items-center justify-center isolate z-0 ",children:[e.jsxs(i.div,{initial:{opacity:.5,width:"15rem"},whileInView:{opacity:1,width:"30rem"},transition:{delay:.3,duration:.8,ease:"easeInOut"},style:{backgroundImage:"conic-gradient(var(--conic-position), var(--tw-gradient-stops))"},className:"absolute inset-auto right-1/2 h-56 overflow-visible w-[30rem] bg-gradient-conic from-green-500 via-transparent to-transparent text-white [--conic-position:from_70deg_at_center_top]",children:[e.jsx("div",{className:"absolute  w-[100%] left-0 bg-slate-950 h-40 bottom-0 z-20 [mask-image:linear-gradient(to_top,white,transparent)]"}),e.jsx("div",{className:"absolute  w-40 h-[100%] left-0 bg-slate-950  bottom-0 z-20 [mask-image:linear-gradient(to_right,white,transparent)]"})]}),e.jsxs(i.div,{initial:{opacity:.5,width:"15rem"},whileInView:{opacity:1,width:"30rem"},transition:{delay:.3,duration:.8,ease:"easeInOut"},style:{backgroundImage:"conic-gradient(var(--conic-position), var(--tw-gradient-stops))"},className:"absolute inset-auto left-1/2 h-56 w-[30rem] bg-gradient-conic from-transparent via-transparent to-green-500 text-white [--conic-position:from_290deg_at_center_top]",children:[e.jsx("div",{className:"absolute  w-40 h-[100%] right-0 bg-slate-950  bottom-0 z-20 [mask-image:linear-gradient(to_left,white,transparent)]"}),e.jsx("div",{className:"absolute  w-[100%] right-0 bg-slate-950 h-40 bottom-0 z-20 [mask-image:linear-gradient(to_top,white,transparent)]"})]}),e.jsx("div",{className:"absolute top-1/2 h-48 w-full translate-y-12 scale-x-150 bg-slate-950 blur-2xl"}),e.jsx("div",{className:"absolute top-1/2 z-50 h-48 w-full bg-transparent opacity-10 backdrop-blur-md"}),e.jsx("div",{className:"absolute inset-auto z-50 h-36 w-[28rem] -translate-y-1/2 rounded-full bg-green-500 opacity-50 blur-3xl"}),e.jsx(i.div,{initial:{width:"8rem"},whileInView:{width:"16rem"},transition:{delay:.3,duration:.8,ease:"easeInOut"},className:"absolute inset-auto z-30 h-36 w-64 -translate-y-[6rem] rounded-full bg-green-400 blur-2xl"}),e.jsx(i.div,{initial:{width:"15rem"},whileInView:{width:"30rem"},transition:{delay:.3,duration:.8,ease:"easeInOut"},className:"absolute inset-auto z-50 h-0.5 w-[30rem] -translate-y-[7rem] bg-green-400 "}),e.jsx("div",{className:"absolute inset-auto z-40 h-44 w-full -translate-y-[12.5rem] bg-slate-950 "})]}),e.jsx("div",{className:"relative z-50 flex md:-translate-y-96 -translate-y-80 flex-col items-center px-5",children:a})]});function Ce(){return e.jsxs(L,{children:[e.jsx($,{}),e.jsx(ee,{}),e.jsx("div",{className:"w-full mt-10 bg-[#063b3e] h-[200px] mb-20 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center space-y-4",children:[e.jsx("h1",{className:"font-bold text-4xl",children:"Jumlah Laporan"}),e.jsx("h1",{className:"font-bold text-6xl",children:"959,139"})]})})]})}function $(){return e.jsx(Y,{children:e.jsxs(i.h1,{initial:{opacity:.5,y:100},whileInView:{opacity:1,y:0},transition:{delay:.3,duration:.8,ease:"easeInOut"},className:"mt-8 text-white py-4 text-center text-4xl font-medium tracking-tight text-transparent md:text-7xl",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold",children:e.jsx("span",{className:"md:text-7xl text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-green-300 to-yellow-300",children:"Layanan Pengaduan"})}),e.jsx("p",{className:"mt-4 text-lg md:text-xl tracking-wider",children:"Sampaikan laporan Anda langsung kepada instansi pemerintah berwenang"})]})})}const q=({onCoordinatesChange:a})=>(J("click",s=>{const{lat:r,lng:t}=s.latlng;a({lat:r,lng:t})}),null),G=({onCoordinatesChange:a})=>{const[s,r]=g.useState(null),t=n=>{r(n),a(n)};return e.jsx("div",{className:"map-container",style:{height:"400px",width:"100%"},children:e.jsxs(H,{center:[.556174,123.058548],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(K,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(q,{onCoordinatesChange:t}),s&&e.jsx(Z,{position:s,children:e.jsxs(U,{children:["Latitude: ",s.lat,", Longitude:"," ",s.lng]})})]})})},Q={offscreen:{y:300},onscreen:{y:100,transition:{type:"spring",bounce:.4,duration:1}}},X=o.object({name:o.string().min(2).max(50),message:o.string().nonempty({message:"Tidak boleh kosong"}),audio:o.instanceof(File).optional(),latitude:o.number().optional(),longitude:o.number().optional()});function ee(){const a=A({resolver:P(X),defaultValues:{name:"",message:"",audio:void 0,latitude:void 0,longitude:void 0},mode:"onBlur"});function s(t){k.post(route("homepage.store"),t,{onSuccess:()=>{w.success("Pengaduan berhasil dikirim!"),a.reset()},onError:n=>{console.log(n),w.error("Terjadi Kesalahan")}})}const r=t=>{a.setValue("latitude",t.lat),a.setValue("longitude",t.lng)};return e.jsx(i.div,{className:"relative min-h-[90vh] p-4 md:p-0",initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.5},children:e.jsxs(i.div,{className:"mx-auto -mt-[25.2rem] lg:max-w-screen-lg w-full z-[1] bg-white shadow-xl p-6 rounded-2xl",variants:Q,children:[e.jsxs("div",{className:"w-full p-4 rounded-lg bg-[#063b3e] flex items-center justify-between",children:[e.jsx("h1",{className:"text-white font-semibold md:text-2xl text-lg",children:"Sampaikan Laporan Anda"}),e.jsxs(z,{children:[e.jsx(M,{children:e.jsx(W,{className:"text-white"})}),e.jsx(R,{children:e.jsxs(I,{children:[e.jsx(_,{children:"Are you absolutely sure?"}),e.jsx(S,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(V,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(s),encType:"multipart/form-data",className:"space-y-4",children:[e.jsx(c,{control:a.control,name:"name",render:({field:t})=>e.jsxs(d,{children:[e.jsxs(m,{children:["Nama",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{children:e.jsx(b,{placeholder:"Ketikkan Nama Anda",...t,className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"message",render:({field:t})=>e.jsxs(d,{children:[e.jsxs(m,{children:["Pesan",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{children:e.jsx(B,{placeholder:"Tuliskan pesan Anda",className:"resize-none focus:border-none focus-visible:ring-[#063b3e]",...t})}),e.jsxs(D,{className:`${t.value.length>450?"text-red-500":""}`,children:["Maks. ",t.value.length||0,"/450"]}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"audio",render:({field:t})=>e.jsxs(d,{children:[e.jsx(m,{children:"Rekam Suara"}),e.jsx(u,{children:e.jsx(ae,{onAudioReady:n=>{const l=new File([n],"voice_recording.wav",{type:"audio/wav"});a.setValue("audio",l),t.onChange(l)}})}),e.jsx(x,{})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Pilih Lokasi di Peta"}),e.jsx(G,{onCoordinatesChange:r}),e.jsxs("div",{className:"mt-2",children:[e.jsx(c,{control:a.control,name:"latitude",render:({field:t})=>e.jsxs(d,{children:[e.jsxs(m,{children:["Latitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{children:e.jsx(b,{placeholder:"Ketikkan Nama Anda",...t,className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(x,{})]})}),e.jsx(c,{control:a.control,name:"longitude",render:({field:t})=>e.jsxs(d,{children:[e.jsxs(m,{children:["Longitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(u,{children:e.jsx(b,{placeholder:"Ketikkan Nama Anda",...t,className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(x,{})]})})]})]}),e.jsx(T,{type:"submit",children:"Submit"})]})})})]})})}const ae=({onAudioReady:a})=>{const[s,r]=g.useState(!1),[t,n]=g.useState(null),[l,y]=g.useState(null),v=async()=>{n(null);const F=await navigator.mediaDevices.getUserMedia({audio:!0}),h=new MediaRecorder(F);y(h),h.start(),r(!0);const f=[];h.ondataavailable=p=>{f.push(p.data)},h.onstop=()=>{const p=new Blob(f,{type:"audio/mp3"});a(p);const j=new FileReader;j.onloadend=()=>{n(j.result)},j.readAsDataURL(p)}},N=()=>{l&&l.stop(),r(!1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:flex items-center space-x-3 md:space-y-0 space-y-3",children:[e.jsxs(O,{onClick:s?N:v,className:"bg-gray-100 data-[state=on]:bg-red-500 data-[state=on]:text-white",children:[e.jsx(E,{}),s?"Sedang merekam":"Mulai merekam"]}),t&&e.jsx(te,{audioURL:t})]})})},te=({audioURL:a})=>e.jsx("div",{className:"audio-player-container",children:e.jsx("div",{className:"audio-player-wrapper",children:e.jsxs("audio",{controls:!0,className:"audio-player",onPlay:()=>console.log("Audio started playing"),children:[e.jsx("source",{src:a,type:"audio/mp3"}),e.jsx("source",{src:a,type:"audio/webm"}),e.jsx("source",{src:a,type:"audio/wav"}),"Your browser does not support the audio element."]})})});export{Ce as default};
