import{r as s,j as e,U as $,y as V,_ as L}from"./app-S4qwSaQs.js";import _ from"./Main-D0MHpvyr.js";import{z as v,u as H,D as W,a as K,C as U,b as G,c as q,d as J,e as Q,F as Z,f as N,g as M,h as R,i as S,j as D,T as O,k as ee,l as te,M as ne,m as ae,n as se,o as ie,P as re,t as oe,p as le}from"./leaflet-Dr1sYEI-.js";import{I as z}from"./input-CYJmTcAM.js";import{B as ce}from"./sheet-10nfjnVc.js";import{b as X}from"./utils-D27tQCnE.js";import{M as de,u as A,P as ue,a as me,L as pe,m as y}from"./proxy-CgllCZPg.js";import{HeroParallaxDemo as he}from"./HeroParallax-CAzocbdr.js";import"./Navbar-CVhLLRFz.js";import"./Combination-BfFAXI0v.js";class xe extends s.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function fe({children:n,isPresent:o}){const t=s.useId(),i=s.useRef(null),d=s.useRef({width:0,height:0,top:0,left:0}),{nonce:c}=s.useContext(de);return s.useInsertionEffect(()=>{const{width:a,height:r,top:l,left:p}=d.current;if(o||!i.current||!a||!r)return;i.current.dataset.motionPopId=t;const m=document.createElement("style");return c&&(m.nonce=c),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${r}px !important;
            top: ${l}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[o]),e.jsx(xe,{isPresent:o,childRef:i,sizeRef:d,children:s.cloneElement(n,{ref:i})})}const ge=({children:n,initial:o,isPresent:t,onExitComplete:i,custom:d,presenceAffectsLayout:c,mode:a})=>{const r=A(je),l=s.useId(),p=s.useCallback(u=>{r.set(u,!0);for(const x of r.values())if(!x)return;i&&i()},[r,i]),m=s.useMemo(()=>({id:l,initial:o,isPresent:t,custom:d,onExitComplete:p,register:u=>(r.set(u,!1),()=>r.delete(u))}),c?[Math.random(),p]:[t,p]);return s.useMemo(()=>{r.forEach((u,x)=>r.set(x,!1))},[t]),s.useEffect(()=>{!t&&!r.size&&i&&i()},[t]),a==="popLayout"&&(n=e.jsx(fe,{isPresent:t,children:n})),e.jsx(ue.Provider,{value:m,children:n})};function je(){return new Map}const E=n=>n.key||"";function T(n){const o=[];return s.Children.forEach(n,t=>{s.isValidElement(t)&&o.push(t)}),o}const B=({children:n,exitBeforeEnter:o,custom:t,initial:i=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:a="sync"})=>{const r=s.useMemo(()=>T(n),[n]),l=r.map(E),p=s.useRef(!0),m=s.useRef(r),u=A(()=>new Map),[x,f]=s.useState(r),[j,C]=s.useState(r);me(()=>{p.current=!1,m.current=r;for(let g=0;g<j.length;g++){const h=E(j[g]);l.includes(h)?u.delete(h):u.get(h)!==!0&&u.set(h,!1)}},[j,l.length,l.join("-")]);const w=[];if(r!==x){let g=[...r];for(let h=0;h<j.length;h++){const b=j[h],F=E(b);l.includes(F)||(g.splice(h,0,b),w.push(b))}a==="wait"&&w.length&&(g=w),C(T(g)),f(r);return}const{forceRender:k}=s.useContext(pe);return e.jsx(e.Fragment,{children:j.map(g=>{const h=E(g),b=r===j||l.includes(h),F=()=>{if(u.has(h))u.set(h,!0);else return;let P=!0;u.forEach(Y=>{Y||(P=!1)}),P&&(k==null||k(),C(m.current),d&&d())};return e.jsx(ge,{isPresent:b,initial:!p.current||i?void 0:!1,custom:b?void 0:t,presenceAffectsLayout:c,mode:a,onExitComplete:b?void 0:F,children:g},h)})})},ye=({words:n,duration:o=3e3,className:t})=>{const[i,d]=s.useState(n[0]),[c,a]=s.useState(!1),r=s.useCallback(()=>{const l=n[n.indexOf(i)+1]||n[0];d(l),a(!0)},[i,n]);return s.useEffect(()=>{c||setTimeout(()=>{r()},o)},[c,o,r]),e.jsx(B,{onExitComplete:()=>{a(!1)},children:e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100,damping:10},exit:{opacity:0,y:-40,x:40,filter:"blur(8px)",scale:2,position:"absolute"},className:X("z-10 inline-block relative text-left text-neutral-900 dark:text-neutral-100 px-2",t),children:i.split(" ").map((l,p)=>e.jsxs(y.span,{initial:{opacity:0,y:10,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{delay:p*.3,duration:.3},className:"inline-block whitespace-nowrap",children:[l.split("").map((m,u)=>e.jsx(y.span,{initial:{opacity:0,y:10,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{delay:p*.3+u*.05,duration:.2},className:"inline-block",children:m},l+u)),e.jsx("span",{className:"inline-block",children:"Â "})]},l+p))},i)})},be=({children:n,className:o})=>{const t=s.useRef(null),i=s.useRef(null),d=[{initialX:10,translateX:10,duration:7,repeatDelay:3,delay:2},{initialX:600,translateX:600,duration:3,repeatDelay:3,delay:4},{initialX:100,translateX:100,duration:7,repeatDelay:7,className:"h-6"},{initialX:400,translateX:400,duration:5,repeatDelay:14,delay:4},{initialX:800,translateX:800,duration:11,repeatDelay:2,className:"h-20"},{initialX:1e3,translateX:1e3,duration:4,repeatDelay:2,className:"h-12"},{initialX:1200,translateX:1200,duration:6,repeatDelay:4,delay:2,className:"h-6"}];return e.jsxs("div",{ref:i,className:X("h-96 md:h-[60vh] bg-gradient-to-b from-white to-neutral-100 dark:from-neutral-950 dark:to-neutral-800 relative flex items-center w-full justify-center overflow-hidden",o),children:[d.map(c=>e.jsx(I,{beamOptions:c,containerRef:t,parentRef:i},c.initialX+"beam-idx")),n,e.jsx("div",{ref:t,className:"absolute bottom-0 bg-neutral-100 w-full inset-x-0 pointer-events-none",style:{boxShadow:"0 0 24px rgba(34, 42, 53, 0.06), 0 1px 1px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(34, 42, 53, 0.04), 0 0 4px rgba(34, 42, 53, 0.08), 0 16px 68px rgba(47, 48, 55, 0.05), 0 1px 0 rgba(255, 255, 255, 0.1) inset"}})]})},I=$.forwardRef(({parentRef:n,containerRef:o,beamOptions:t={}},i)=>{const d=s.useRef(null),[c,a]=s.useState({detected:!1,coordinates:null}),[r,l]=s.useState(0),[p,m]=s.useState(!1);return s.useEffect(()=>{const x=setInterval(()=>{if(d.current&&o.current&&n.current&&!p){const f=d.current.getBoundingClientRect(),j=o.current.getBoundingClientRect(),C=n.current.getBoundingClientRect();if(f.bottom>=j.top){const w=f.left-C.left+f.width/2,k=f.bottom-C.top;a({detected:!0,coordinates:{x:w,y:k}}),m(!0)}}},50);return()=>clearInterval(x)},[p,o]),s.useEffect(()=>{c.detected&&c.coordinates&&(setTimeout(()=>{a({detected:!1,coordinates:null}),m(!1)},2e3),setTimeout(()=>{l(u=>u+1)},2e3))},[c]),e.jsxs(e.Fragment,{children:[e.jsx(y.div,{ref:d,animate:"animate",initial:{translateY:t.initialY||"-200px",translateX:t.initialX||"0px",rotate:t.rotate||0},variants:{animate:{translateY:t.translateY||"1800px",translateX:t.translateX||"0px",rotate:t.rotate||0}},transition:{duration:t.duration||8,repeat:1/0,repeatType:"loop",ease:"linear",delay:t.delay||0,repeatDelay:t.repeatDelay||0},className:X("absolute z-[100] left-0 top-20 m-auto h-14 w-px rounded-full bg-gradient-to-t from-indigo-500 via-purple-500 to-transparent",t.className)},r),e.jsx(B,{children:c.detected&&c.coordinates&&e.jsx(ve,{className:"",style:{left:`${c.coordinates.x}px`,top:`${c.coordinates.y}px`,transform:"translate(-50%, -50%)"}},`${c.coordinates.x}-${c.coordinates.y}`)})]})});I.displayName="CollisionMechanism";const ve=({...n})=>{const o=Array.from({length:20},(t,i)=>({id:i,initialX:0,initialY:0,directionX:Math.floor(Math.random()*80-40),directionY:Math.floor(Math.random()*-50-10)}));return e.jsxs("div",{...n,className:X("absolute z-50 h-2 w-2",n.className),children:[e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1.5,ease:"easeOut"},className:"absolute -inset-x-10 top-0 m-auto h-2 w-10 rounded-full bg-gradient-to-r from-transparent via-indigo-500 to-transparent blur-sm"}),o.map(t=>e.jsx(y.span,{initial:{x:t.initialX,y:t.initialY,opacity:1},animate:{x:t.directionX,y:t.directionY,opacity:0},transition:{duration:Math.random()*1.5+.5,ease:"easeOut"},className:"absolute h-1 w-1 rounded-full bg-gradient-to-b from-indigo-500 to-purple-500"},t.id))]})};function Be(){const n=["Masyarakat","Online","Cepat Tanggap","Fasilitas Umum","Berbasis Teknologi"];return e.jsxs(_,{children:[e.jsx(be,{children:e.jsxs("div",{className:"bg-grid-white/[0.2] relative w-full overflow-hidden bg-slate-900 flex flex-col items-center justify-center rounded-lg",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full bg-slate-900 z-20 [mask-image:radial-gradient(transparent,white)] pointer-events-none"}),e.jsx("div",{className:"absolute pointer-events-none inset-0 flex items-center justify-center dark:bg-black bg-slate-900 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),e.jsx("div",{className:"h-[40rem] z-[50] min-w-screen-md flex justify-center items-center px-4",children:e.jsxs("div",{className:"md:text-5xl text-4xl mt-20 mx-auto text-center space-y-2 font-semibold text-white dark:text-neutral-400",children:[e.jsx("p",{className:"md:text-xl md:-mt-32 -mt-16 text-lg text-neutral-300 font-normal relative",children:"Sampaikan laporan Anda langsung kepada instansi pemerintah berwenang"}),e.jsxs("h1",{children:["Layanan Pengaduan ",e.jsx("br",{})]}),e.jsx(ye,{words:n,className:"text-yellow-500 px-0"})]})})]})}),e.jsx(Ne,{}),e.jsx(he,{})]})}const Ce=({onCoordinatesChange:n})=>(le("click",o=>{const{lat:t,lng:i}=o.latlng;n({lat:t,lng:i})}),null),we=({onCoordinatesChange:n})=>{const[o,t]=s.useState(null),i=d=>{t(d),n(d)};return e.jsx("div",{className:"map-container",style:{height:"400px",width:"100%"},children:e.jsxs(ae,{center:[.556174,123.058548],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(se,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Ce,{onCoordinatesChange:i}),o&&e.jsx(ie,{position:o,children:e.jsxs(re,{children:["Latitude: ",o.lat,", Longitude:"," ",o.lng]})})]})})},ke=v.object({name:v.string().min(2).max(50),message:v.string().nonempty({message:"Tidak boleh kosong"}),audio:v.instanceof(File).optional(),latitude:v.number({message:"Hanya boleh menuliskan angka!"}),longitude:v.number({message:"Hanya boleh menuliskan angka!"})});function Ne(){const n=H({resolver:oe(ke),defaultValues:{name:"",message:"",audio:void 0,latitude:void 0,longitude:void 0},mode:"onBlur"});function o(a){V.post(route("homepage.store"),a,{onSuccess:()=>{L.success("Pengaduan berhasil dikirim!"),n.reset()},onError:r=>{console.log(r),L.error("Terjadi Kesalahan")}})}const[t,i]=s.useState(!1);s.useEffect(()=>{const a=()=>{i(window.innerWidth>=768)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const d={offscreen:{y:t?300:100},onscreen:{y:50,transition:{type:"tween",bounce:.4,duration:1}}},c=a=>{n.setValue("latitude",a.lat),n.setValue("longitude",a.lng)};return e.jsx(y.div,{className:"relative min-h-[90vh] p-4 md:p-0 z-[999]",initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.6},children:e.jsxs(y.div,{className:"mx-auto md:-mt-[12rem] -mt-[7rem] lg:max-w-screen-lg w-full z-[1] bg-white shadow-xl p-6 rounded-2xl",variants:d,children:[e.jsxs("div",{className:"w-full p-4 rounded-lg bg-slate-900 flex items-center justify-between",children:[e.jsx("h1",{className:"text-yellow-400 font-semibold md:text-2xl text-lg",children:"Sampaikan Laporan Anda"}),e.jsxs(W,{children:[e.jsx(K,{children:e.jsx(U,{className:"text-white"})}),e.jsx(G,{children:e.jsxs(q,{children:[e.jsx(J,{children:"Are you absolutely sure?"}),e.jsx(Q,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(Z,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(o),encType:"multipart/form-data",className:"space-y-4",children:[e.jsx(N,{control:n.control,name:"name",render:({field:a})=>e.jsxs(M,{children:[e.jsxs(R,{children:["Nama",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{children:e.jsx(z,{placeholder:"Ketikkan Nama Anda",...a,className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(D,{})]})}),e.jsx(N,{control:n.control,name:"message",render:({field:a})=>e.jsxs(M,{children:[e.jsxs(R,{children:["Pesan",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{children:e.jsx(O,{placeholder:"Tuliskan pesan Anda",className:"resize-none focus:border-none focus-visible:ring-[#063b3e]",...a})}),e.jsxs(ee,{className:`${a.value.length>450?"text-red-500":""}`,children:["Maks. ",a.value.length||0,"/450"]}),e.jsx(D,{})]})}),e.jsx(N,{control:n.control,name:"audio",render:({field:a})=>e.jsxs(M,{children:[e.jsx(R,{children:"Rekam Suara"}),e.jsx(S,{children:e.jsx(Me,{onAudioReady:r=>{const l=new File([r],"voice_recording.wav",{type:"audio/wav"});n.setValue("audio",l),a.onChange(l)}})}),e.jsx(D,{})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Pilih Lokasi di Peta"}),e.jsx(we,{onCoordinatesChange:c}),e.jsxs("div",{className:"mt-2",children:[e.jsx(N,{control:n.control,name:"latitude",render:({field:a})=>e.jsxs(M,{children:[e.jsxs(R,{children:["Latitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{children:e.jsx(z,{placeholder:"Masukkan Latitude",...a,onChange:r=>{const l=r.target.value;a.onChange(l===""?void 0:parseFloat(l)||l)},className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(D,{})]})}),e.jsx(N,{control:n.control,name:"longitude",render:({field:a})=>e.jsxs(M,{children:[e.jsxs(R,{children:["Longitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(S,{children:e.jsx(z,{placeholder:"Masukkan Longitude",...a,onChange:r=>{const l=r.target.value;a.onChange(l===""?void 0:parseFloat(l)||l)},className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(D,{})]})})]})]}),e.jsx(ce,{type:"submit",children:"Submit"})]})})})]})})}const Me=({onAudioReady:n})=>{const[o,t]=s.useState(!1),[i,d]=s.useState(null),[c,a]=s.useState(null),r=async()=>{d(null);const p=await navigator.mediaDevices.getUserMedia({audio:!0}),m=new MediaRecorder(p);a(m),m.start(),t(!0);const u=[];m.ondataavailable=x=>{u.push(x.data)},m.onstop=()=>{const x=new Blob(u,{type:"audio/mp3"});n(x);const f=new FileReader;f.onloadend=()=>{d(f.result)},f.readAsDataURL(x)}},l=()=>{c&&c.stop(),t(!1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:flex items-center space-x-3 md:space-y-0 space-y-3",children:[e.jsxs(te,{onClick:o?l:r,className:"bg-gray-100 data-[state=on]:bg-red-500 data-[state=on]:text-white",children:[e.jsx(ne,{}),o?"Sedang merekam":"Mulai merekam"]}),i&&e.jsx(Re,{audioURL:i})]})})},Re=({audioURL:n})=>e.jsx("div",{className:"audio-player-container",children:e.jsx("div",{className:"audio-player-wrapper",children:e.jsxs("audio",{controls:!0,className:"audio-player",onPlay:()=>console.log("Audio started playing"),children:[e.jsx("source",{src:n,type:"audio/mp3"}),e.jsx("source",{src:n,type:"audio/webm"}),e.jsx("source",{src:n,type:"audio/wav"}),"Your browser does not support the audio element."]})})});export{Be as default};
