import{r as o,j as e,U as I,y as V,_ as A}from"./app-CDD4Lv-q.js";import $ from"./Main-B5IGcGVQ.js";import{r as U,s as D,v as W,w as _,L as K,m as y,z as v,u as O,D as Y,a as q,C as G,b as X,c as Z,d as J,e as Q,F as ee,f as C,g as w,h as k,i as N,j as M,T as te,k as se,l as ne,M as ae,n as re,o as oe,p as ie,P as le,t as ce,q as de}from"./leaflet-CB6-HmvB.js";import{I as E}from"./input-D8dcdfWy.js";import{B as ue}from"./sheet-D2krheDD.js";import{b as B}from"./utils-CxteQpqs.js";import"./Navbar-pOD4zh0b.js";import"./Combination-D2Bk3FxL.js";class me extends o.Component{getSnapshotBeforeUpdate(r){const n=this.props.childRef.current;if(n&&r.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=n.offsetHeight||0,t.width=n.offsetWidth||0,t.top=n.offsetTop,t.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pe({children:s,isPresent:r}){const n=o.useId(),t=o.useRef(null),i=o.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=o.useContext(U);return o.useInsertionEffect(()=>{const{width:h,height:a,top:c,left:u}=i.current;if(r||!t.current||!h||!a)return;t.current.dataset.motionPopId=n;const m=document.createElement("style");return l&&(m.nonce=l),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${a}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[r]),e.jsx(me,{isPresent:r,childRef:t,sizeRef:i,children:o.cloneElement(s,{ref:t})})}const he=({children:s,initial:r,isPresent:n,onExitComplete:t,custom:i,presenceAffectsLayout:l,mode:h})=>{const a=D(xe),c=o.useId(),u=o.useCallback(d=>{a.set(d,!0);for(const x of a.values())if(!x)return;t&&t()},[a,t]),m=o.useMemo(()=>({id:c,initial:r,isPresent:n,custom:i,onExitComplete:u,register:d=>(a.set(d,!1),()=>a.delete(d))}),l?[Math.random(),u]:[n,u]);return o.useMemo(()=>{a.forEach((d,x)=>a.set(x,!1))},[n]),o.useEffect(()=>{!n&&!a.size&&t&&t()},[n]),h==="popLayout"&&(s=e.jsx(pe,{isPresent:n,children:s})),e.jsx(W.Provider,{value:m,children:s})};function xe(){return new Map}const R=s=>s.key||"";function T(s){const r=[];return o.Children.forEach(s,n=>{o.isValidElement(n)&&r.push(n)}),r}const fe=({children:s,exitBeforeEnter:r,custom:n,initial:t=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:h="sync"})=>{const a=o.useMemo(()=>T(s),[s]),c=a.map(R),u=o.useRef(!0),m=o.useRef(a),d=D(()=>new Map),[x,b]=o.useState(a),[g,P]=o.useState(a);_(()=>{u.current=!1,m.current=a;for(let f=0;f<g.length;f++){const p=R(g[f]);c.includes(p)?d.delete(p):d.get(p)!==!0&&d.set(p,!1)}},[g,c.length,c.join("-")]);const F=[];if(a!==x){let f=[...a];for(let p=0;p<g.length;p++){const j=g[p],S=R(j);c.includes(S)||(f.splice(p,0,j),F.push(j))}h==="wait"&&F.length&&(f=F),P(T(f)),b(a);return}const{forceRender:L}=o.useContext(K);return e.jsx(e.Fragment,{children:g.map(f=>{const p=R(f),j=a===g||c.includes(p),S=()=>{if(d.has(p))d.set(p,!0);else return;let z=!0;d.forEach(H=>{H||(z=!1)}),z&&(L==null||L(),P(m.current),i&&i())};return e.jsx(he,{isPresent:j,initial:!u.current||t?void 0:!1,custom:j?void 0:n,presenceAffectsLayout:l,mode:h,onExitComplete:j?void 0:S,children:f},p)})})},ge=({className:s,...r})=>{const n=new Array(150).fill(1),t=new Array(100).fill(1);let i=["--sky-300","--pink-300","--green-300","--yellow-300","--red-300","--purple-300","--blue-300","--indigo-300","--violet-300"];const l=()=>i[Math.floor(Math.random()*i.length)];return e.jsx("div",{style:{transform:"translate(-40%,-60%) skewX(-48deg) skewY(14deg) scale(0.675) rotate(0deg) translateZ(0)"},className:B("absolute left-1/4 p-4 -top-1/4 flex  -translate-x-1/2 -translate-y-1/2 w-full h-full z-0 ",s),...r,children:n.map((h,a)=>e.jsx(y.div,{className:"w-16 h-8  border-l  border-slate-700 relative",children:t.map((c,u)=>e.jsx(y.div,{whileHover:{backgroundColor:`var(${l()})`,transition:{duration:0}},animate:{transition:{duration:2}},className:"w-16 h-8  border-r border-t border-slate-700 relative",children:u%2===0&&a%2===0?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"absolute h-6 w-10 -top-[14px] -left-[22px] text-slate-700 stroke-[1px] pointer-events-none",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"})}):null},"col"+u))},"row"+a))})},je=I.memo(ge),ye=({words:s,duration:r=3e3,className:n})=>{const[t,i]=o.useState(s[0]),[l,h]=o.useState(!1),a=o.useCallback(()=>{const c=s[s.indexOf(t)+1]||s[0];i(c),h(!0)},[t,s]);return o.useEffect(()=>{l||setTimeout(()=>{a()},r)},[l,r,a]),e.jsx(fe,{onExitComplete:()=>{h(!1)},children:e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100,damping:10},exit:{opacity:0,y:-40,x:40,filter:"blur(8px)",scale:2,position:"absolute"},className:B("z-10 inline-block relative text-left text-neutral-900 dark:text-neutral-100 px-2",n),children:t.split(" ").map((c,u)=>e.jsxs(y.span,{initial:{opacity:0,y:10,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{delay:u*.3,duration:.3},className:"inline-block whitespace-nowrap",children:[c.split("").map((m,d)=>e.jsx(y.span,{initial:{opacity:0,y:10,filter:"blur(8px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{delay:u*.3+d*.05,duration:.2},className:"inline-block",children:m},c+d)),e.jsx("span",{className:"inline-block",children:"Â "})]},c+u))},t)})};function Te(){const s=["Masyarakat","Online","Cepat Tanggap","Fasilitas Umum","Berbasis Teknologi"];return e.jsxs($,{children:[e.jsxs("div",{className:"h-[60vh] relative w-full overflow-hidden bg-slate-900 flex flex-col items-center justify-center rounded-lg",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full bg-slate-900 z-20 [mask-image:radial-gradient(transparent,white)] pointer-events-none"}),e.jsx(je,{}),e.jsx("div",{className:"h-[40rem] z-[50] -mt-10 min-w-screen-md flex justify-center items-center px-4",children:e.jsxs("div",{className:"text-5xl mx-auto text-center space-y-2 font-semibold text-white dark:text-neutral-400",children:[e.jsx("p",{className:"text-xl text-neutral-300 font-normal relative",children:"Sampaikan laporan Anda langsung kepada instansi pemerintah berwenang"}),e.jsxs("h1",{children:["Layanan Pengaduan ",e.jsx("br",{})]}),e.jsx(ye,{words:s,className:"text-yellow-500 px-0"})]})})]}),e.jsx(ke,{})]})}const ve=({onCoordinatesChange:s})=>(de("click",r=>{const{lat:n,lng:t}=r.latlng;s({lat:n,lng:t})}),null),be=({onCoordinatesChange:s})=>{const[r,n]=o.useState(null),t=i=>{n(i),s(i)};return e.jsx("div",{className:"map-container",style:{height:"400px",width:"100%"},children:e.jsxs(re,{center:[.556174,123.058548],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(oe,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(ve,{onCoordinatesChange:t}),r&&e.jsx(ie,{position:r,children:e.jsxs(le,{children:["Latitude: ",r.lat,", Longitude:"," ",r.lng]})})]})})},Ce={offscreen:{y:300},onscreen:{y:50,transition:{type:"tween",bounce:.4,duration:1}}},we=v.object({name:v.string().min(2).max(50),message:v.string().nonempty({message:"Tidak boleh kosong"}),audio:v.instanceof(File).optional(),latitude:v.number({message:"Hanya boleh menuliskan angka!"}),longitude:v.number({message:"Hanya boleh menuliskan angka!"})});function ke(){const s=O({resolver:ce(we),defaultValues:{name:"",message:"",audio:void 0,latitude:void 0,longitude:void 0},mode:"onBlur"});function r(t){V.post(route("homepage.store"),t,{onSuccess:()=>{A.success("Pengaduan berhasil dikirim!"),s.reset()},onError:i=>{console.log(i),A.error("Terjadi Kesalahan")}})}const n=t=>{s.setValue("latitude",t.lat),s.setValue("longitude",t.lng)};return e.jsx(y.div,{className:"relative min-h-[90vh] p-4 md:p-0 z-[50]",initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:.6},children:e.jsxs(y.div,{className:"mx-auto -mt-[12rem] lg:max-w-screen-lg w-full z-[1] bg-white shadow-xl p-6 rounded-2xl",variants:Ce,children:[e.jsxs("div",{className:"w-full p-4 rounded-lg bg-slate-900 flex items-center justify-between",children:[e.jsx("h1",{className:"text-yellow-400 font-semibold md:text-2xl text-lg",children:"Sampaikan Laporan Anda"}),e.jsxs(Y,{children:[e.jsx(q,{children:e.jsx(G,{className:"text-white"})}),e.jsx(X,{children:e.jsxs(Z,{children:[e.jsx(J,{children:"Are you absolutely sure?"}),e.jsx(Q,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(ee,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(r),encType:"multipart/form-data",className:"space-y-4",children:[e.jsx(C,{control:s.control,name:"name",render:({field:t})=>e.jsxs(w,{children:[e.jsxs(k,{children:["Nama",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{children:e.jsx(E,{placeholder:"Ketikkan Nama Anda",...t,className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(M,{})]})}),e.jsx(C,{control:s.control,name:"message",render:({field:t})=>e.jsxs(w,{children:[e.jsxs(k,{children:["Pesan",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{children:e.jsx(te,{placeholder:"Tuliskan pesan Anda",className:"resize-none focus:border-none focus-visible:ring-[#063b3e]",...t})}),e.jsxs(se,{className:`${t.value.length>450?"text-red-500":""}`,children:["Maks. ",t.value.length||0,"/450"]}),e.jsx(M,{})]})}),e.jsx(C,{control:s.control,name:"audio",render:({field:t})=>e.jsxs(w,{children:[e.jsx(k,{children:"Rekam Suara"}),e.jsx(N,{children:e.jsx(Ne,{onAudioReady:i=>{const l=new File([i],"voice_recording.wav",{type:"audio/wav"});s.setValue("audio",l),t.onChange(l)}})}),e.jsx(M,{})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Pilih Lokasi di Peta"}),e.jsx(be,{onCoordinatesChange:n}),e.jsxs("div",{className:"mt-2",children:[e.jsx(C,{control:s.control,name:"latitude",render:({field:t})=>e.jsxs(w,{children:[e.jsxs(k,{children:["Latitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{children:e.jsx(E,{placeholder:"Masukkan Latitude",...t,onChange:i=>{const l=i.target.value;t.onChange(l===""?void 0:parseFloat(l)||l)},className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(M,{})]})}),e.jsx(C,{control:s.control,name:"longitude",render:({field:t})=>e.jsxs(w,{children:[e.jsxs(k,{children:["Longitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(N,{children:e.jsx(E,{placeholder:"Masukkan Longitude",...t,onChange:i=>{const l=i.target.value;t.onChange(l===""?void 0:parseFloat(l)||l)},className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(M,{})]})})]})]}),e.jsx(ue,{type:"submit",children:"Submit"})]})})})]})})}const Ne=({onAudioReady:s})=>{const[r,n]=o.useState(!1),[t,i]=o.useState(null),[l,h]=o.useState(null),a=async()=>{i(null);const u=await navigator.mediaDevices.getUserMedia({audio:!0}),m=new MediaRecorder(u);h(m),m.start(),n(!0);const d=[];m.ondataavailable=x=>{d.push(x.data)},m.onstop=()=>{const x=new Blob(d,{type:"audio/mp3"});s(x);const b=new FileReader;b.onloadend=()=>{i(b.result)},b.readAsDataURL(x)}},c=()=>{l&&l.stop(),n(!1)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:flex items-center space-x-3 md:space-y-0 space-y-3",children:[e.jsxs(ne,{onClick:r?c:a,className:"bg-gray-100 data-[state=on]:bg-red-500 data-[state=on]:text-white",children:[e.jsx(ae,{}),r?"Sedang merekam":"Mulai merekam"]}),t&&e.jsx(Me,{audioURL:t})]})})},Me=({audioURL:s})=>e.jsx("div",{className:"audio-player-container",children:e.jsx("div",{className:"audio-player-wrapper",children:e.jsxs("audio",{controls:!0,className:"audio-player",onPlay:()=>console.log("Audio started playing"),children:[e.jsx("source",{src:s,type:"audio/mp3"}),e.jsx("source",{src:s,type:"audio/webm"}),e.jsx("source",{src:s,type:"audio/wav"}),"Your browser does not support the audio element."]})})});export{Te as default};
