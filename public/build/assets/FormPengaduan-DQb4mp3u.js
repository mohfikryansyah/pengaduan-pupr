import{j as e,y as f,_ as u}from"./app-DN87dkZC.js";import{z as n,u as b,F as v,a as o,b as i,c as a,d as t,e as l,T as y,f as N,t as k}from"./index-DX6ewcbV.js";import w from"./MyMap-C1Cw_Yy9.js";import F from"./VoiceRecorder-Ju099HJI.js";import{D,a as C,b as T,c as S,d as V,e as L}from"./dialog-CYZYE7DJ.js";import{I as c}from"./input-oyzaCvfI.js";import{B as M}from"./button-CMDTaP5V.js";import{u as P}from"./use-media-query-CcDQLK-I.js";import{m as x}from"./proxy-VscmhhBt.js";import{C as A}from"./circle-help-vP2i5osL.js";import"./index-D4B-ssot.js";import"./utils-Dvg7oLsK.js";import"./label-iYdl_MkA.js";import"./index-CB5t9krD.js";import"./index-DVXO1BkA.js";import"./leaflet-Dv6GTix0.js";import"./toggle-BiNj5O7s.js";import"./index-DW48STyt.js";import"./index-yIdjLsbd.js";import"./component-C0QqtomD.js";const z=n.object({name:n.string().min(2).max(50),message:n.string().nonempty({message:"Tidak boleh kosong"}),audio:n.instanceof(File).optional(),latitude:n.union([n.number(),n.string()]),longitude:n.union([n.number(),n.string()]),files:n.array(n.instanceof(File)).optional()});function re(){const r=b({resolver:k(z),defaultValues:{name:"",message:"",audio:void 0,latitude:void 0,longitude:void 0,files:[]},mode:"onBlur"});function h(){f.post(route("complaint.store"),r.getValues(),{onSuccess:()=>{u.success("Pengaduan berhasil dikirim!"),r.reset()},onError:s=>{u.error("Terjadi Kesalahan")}})}const d=P("(min-width: 768px)"),j={offscreen:{y:d?300:100},onscreen:{y:d?50:20,transition:{type:"spring",bounce:.4,duration:1}}},p=s=>{r.setValue("latitude",s.lat),r.setValue("longitude",s.lng)};return e.jsx(x.div,{className:"relative min-h-[90vh] p-4 md:p-0 z-[50]",initial:"offscreen",whileInView:"onscreen",viewport:{once:!0,amount:d?.6:.3},children:e.jsxs(x.div,{className:"mx-auto md:-mt-[12rem] -mt-[7rem] lg:max-w-screen-lg w-full z-[1] bg-white shadow-xl p-6 rounded-2xl",variants:j,children:[e.jsxs("div",{className:"w-full p-4 rounded-lg bg-slate-900 flex items-center justify-between",children:[e.jsx("h1",{className:"text-yellow-400 font-semibold md:text-2xl text-lg",children:"Sampaikan Laporan Anda"}),e.jsxs(D,{children:[e.jsx(C,{children:e.jsx(A,{className:"text-white"})}),e.jsx(T,{children:e.jsxs(S,{children:[e.jsx(V,{children:"Are you absolutely sure?"}),e.jsx(L,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(v,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(h),encType:"multipart/form-data",className:"space-y-4",children:[e.jsx(o,{control:r.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(a,{children:["Nama",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{children:e.jsx(c,{placeholder:"Ketikkan Nama Anda",...s,className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"message",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(a,{children:["Pesan",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{children:e.jsx(y,{placeholder:"Tuliskan pesan Anda",className:"resize-none focus:border-none focus-visible:ring-[#063b3e]",...s})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(N,{className:`order-2 ${s.value.length>450?"text-red-500":""}`,children:["Maks. ",s.value.length||0,"/450"]}),e.jsx(l,{})]})]})}),e.jsx(o,{control:r.control,name:"audio",render:({field:s})=>e.jsxs(i,{children:[e.jsx(a,{children:"Rekam Suara"}),e.jsx(t,{children:e.jsx(F,{onAudioReady:g=>{const m=new File([g],"voice_recording.wav",{type:"audio/wav"});r.setValue("audio",m),s.onChange(m)}})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"files",render:({field:s})=>e.jsxs(i,{children:[e.jsx(a,{children:"Dokumen Pendukung"}),e.jsx(t,{children:e.jsx("div",{className:"w-full mx-auto min-h-80 border border-dashed bg-white dark:bg-black border-neutral-200 dark:border-neutral-800 rounded-lg"})}),e.jsx(l,{})]})}),e.jsxs("div",{children:[e.jsx(a,{children:"Pilih Lokasi di Peta"}),e.jsx(w,{onCoordinatesChange:p}),e.jsxs("div",{className:"mt-2",children:[e.jsx(o,{control:r.control,name:"latitude",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(a,{children:["Latitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{children:e.jsx(c,{placeholder:"Masukkan Latitude",...s,className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(l,{})]})}),e.jsx(o,{control:r.control,name:"longitude",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(a,{children:["Longitude",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{children:e.jsx(c,{placeholder:"Masukkan Longitude",...s,type:"text",className:"focus:border-none focus-visible:ring-[#063b3e]"})}),e.jsx(l,{})]})})]})]}),e.jsx(M,{type:"submit",children:"Submit"})]})})})]})})}export{re as default};
